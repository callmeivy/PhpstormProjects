<!-- 前端文件-->
<!DOCTYPE html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,minimum-scale=1" />
    <title>php+mySQL+Ajax实例</title>
</head>
<body>
<style>
    body{margin:0px;padding:0px;font-family:'微软雅黑';font-size:16px;color:#333;}
    ul,li{margin:0px;padding:0px; list-style:none; font-style:normal;}
    a{ text-decoration:none;color:inherit}
    .main{width:90%;margin:0 auto;}
    .more{color:#999;font-size:14px;float:right}
    .news-tit{font-weight:bold;line-height:27px;padding-top:10px;}
    #list li{line-height:27px;font-size:15px;border-bottom:1px solid #eee;padding:10px 0px;}
    .widget-list-link:hover{ color:#F90}
    .more-mark{float:right}
</style>
<div class="main">
    <div><span class="news-tit">新闻动态</span><span class="more">更多</span></div>
    <div class="list-wrap">
        <ul id="list"><!--获取的数据列表展示在这里--></ul>
    </div>
</div>
<script src="./jquery-3.3.1.min.js"></script>
<script>
    $(function(){
        // var User ='root';//设置所调取的栏目id
        $.ajax({
            url:'phptoAjax.php',//连接获取数据的php接口文件
            // dataType:'json',//接收格式
            // type:'POST',    //传递方法
            type:'GET',    //传递方法
            beforeSend:function(xhr){
                console.log(xhr)
                console.log('发送前')
            },
            success:function(data){ //成功之后执行
                console.log("okok");
                var ul = "";
                result=JSON.parse(data);
                // data样式：
                // [{"title":"\u6211\u662f\u6807\u9898","pubdate":"2018-08-08 15:11:00","litpic":"no"},{"title":"\u7b2c\
                // u4e8c\u6761\u6807\u9898","pubdate":"2018-08-08 15:49:29","litpic":"yes"}]
                alert(result[0]['title']);
                for(var i= 0;i<4;i++){ //限制的四条
                    ul += "<li class='list'><a href='phpArticle.php?art="+result[i]['id']+" 'class='widget-list-link'>" + result[i]['title']+"<i class='more-mark'>"+">>"+"</i></a></li>";
                }
                $("#list").html(ul);

            },
            error:function(data,type, err){   //失败执行
                console.log("链接错误") ;

                alert(data);
                alert(data.error_code);
                console.log("ajax错误类型："+type);
                console.log(err);
            }
        });
    });

</script>

</body>
</html>